import config from '/backend/config'

export default function handler(_, res){
    const menuJSON = [{"menu_id":1,"name":"kuramo breakfast","price":15313,"features":["smoked salmon","2 scrambled eggs","sauteed mushrooms","pastries","cheese slices","avocado slices"]},{"menu_id":1,"name":"blue peter","price":14700,"features":["2 eggs of choice","2 sausages","fried mushrooms","grilled tomatoes","bacon","toast"]},{"menu_id":1,"name":"eggs benedict","price":14774,"features":["2 slices of toast","2 poached eggs","bacon","baby spinach topped with hollandaise on toast"]},{"menu_id":1,"name":"eggs benedict","price":14112,"features":["french toast","2 sausages","sauteed vegetables","bolognese sauce"]},{"menu_id":1,"name":"pancakes","price":14994,"features":["with maple syrup","2 eggs of choice","bacon"]},{"menu_id":1,"name":"full english breakfast","price":17150,"features":["2 eggs","bacon","2 sausages","grilled tomato","baked beans","mushrooms","potatoes","fruits & pastries"]},{"menu_id":1,"name":"african breakfast","price":12863,"features":["boiled or fried yam","2 egg sauce","spicy gizzard or fish & plantain"]},{"menu_id":1,"name":"african breakfast","price":13892,"features":["corn flakes or muesli","fruits","yoghurt","milk","honey"]},{"menu_id":1,"name":"cereal bowl & oat meal","price":13892,"features":["corn flakes or muesli","fruits","yoghurt","milk","honey"]},{"menu_id":2,"name":"bacon and corn chowder","price":8085,"features":["sweet corn","bacon","creame","potatoes"]},{"menu_id":2,"name":"brazilian fish soup","price":9555,"features":["fish","tomato","coconut","peppers","lemon","chili mild & coriander"]},{"menu_id":2,"name":"chicken noodle soup","price":9849,"features":["chicken","noodles","vegetables","ginger","chili mild & lemon zest"]},{"menu_id":3,"name":"bacon and corn chowder","price":8085,"features":["sweet corn","bacon","creame","potatoes"]},{"menu_id":3,"name":"brazilian fish soup","price":9555,"features":["fish","tomato","coconut","peppers","lemon","chili mild & coriander"]},{"menu_id":3,"name":"chicken noodle soup","price":9849,"features":["chicken","noodles","vegetables","ginger","chili mild & lemon zest"]},{"menu_id":4,"name":"beetroot & egg salad","price":7963,"features":["lettuce","beetroot","boiled egg and nuts served with honey mustard mayo dressing"]},{"menu_id":4,"name":"smoked salmon salad","price":8085,"features":["smoked salmon","poached egg","lettuce","tomato","pickled onion served with vinaigrette"]},{"menu_id":4,"name":"garden salad","price":7350,"features":["lettuce","carrots","tomato","baby corn","cucumber","avocado served with ginger balsamic vinaigrette"]},{"menu_id":5,"name":"club sandwich","price":9800,"features":["chicken","egg","bacon","lettuce","tomato","cheese and mayo"]},{"menu_id":5,"name":"beef sandwich","price":9800,"features":["beef","caramelized onion","tomato and mayo"]},{"menu_id":5,"name":"vegetable sandwich","price":5513,"features":["grilled vegetables","tomato","lettuce","chili mild and cocktail sauce"]},{"menu_id":5,"name":"fully loaded kuramo burger","price":17763,"features":["beef patty","bacon","onion confit","lettuce","tomato","onion","cheese and cucumber"]},{"menu_id":5,"name":"chicken burger","price":13720,"features":["chicken breats","onion","tomato","lettuce"]},{"menu_id":6,"name":"flam-grilled prawns","price":27800,"features":["with garlic butter sauce and a choice of rice or chips"]},{"menu_id":6,"name":"pepper steak","price":17150,"features":["grilled beef fillet with side salad and chips or rice with a sauce of your choice"]},{"menu_id":6,"name":"whole roast croaker fish","price":24500,"features":["table plate size whole fish with sauteed vegetables served with either rice or chips with lemon"]},{"menu_id":6,"name":"lemon chicken or plain quarter chicken","price":15925,"features":["grilled marinated chicken with a side salad and a choice of rice or chips with a sauce of choice"]},{"menu_id":6,"name":"chicken coconut curry","price":16538,"features":["with basmati riec and sauteed vegetables"]},{"menu_id":6,"name":"seafood platter","price":30625,"features":["croaker fish","calamari","prawns","potato wedges or rice served with sauteed vegetables and a sauce of choice"]},{"menu_id":6,"name":"meat platter","price":16538,"features":["beef","chicken","sausage","potato wedges or rice served with sauteed vegetables and a sauce of choice"]},{"menu_id":7,"name":"thai beef or chicken stir-fry","price":17395,"features":["succulent beef or chicken tossed in vegetables","ginger","soy and sesame oil with spaghetti"]},{"menu_id":7,"name":"jambalaya","price":22050,"features":["pasta","shrimps","sausage","chicken","spicy tomato sauce infused with spaghetti or fusilli"]},{"menu_id":7,"name":"frutti de mare","price":19600,"features":["assortment of seafood tossed with spaghetti or penne in a rich creamy sauce"]},{"menu_id":7,"name":"spaghetti bolognese","price":15925,"features":["pasta served with a sauce of mince beef in rich tomato, carrots, peas and herbs"]},{"menu_id":7,"name":"mushroom and chicken alfredo","price":16905,"features":["mushrooms","chicken","creame","cheese","penne pasta"]},{"menu_id":8,"name":"spicy gizzard","price":12250},{"menu_id":8,"name":"spicy chicken wings","price":12740},{"menu_id":8,"name":"spicy chicken","price":16538},{"menu_id":8,"name":"spicy snails","price":12924},{"menu_id":8,"name":"spicy fish","price":16538},{"menu_id":8,"name":"spice goat meat","price":16538},{"menu_id":8,"name":"spicy prawns","price":23490},{"menu_id":9,"name":"croaker fish","price":16660},{"menu_id":9,"name":"beef","price":16538},{"menu_id":9,"name":"chicken","price":16538},{"menu_id":9,"name":"goat meat","price":12924},{"menu_id":10,"name":"edi kan ikong","price":16979},{"menu_id":10,"name":"egusi","price":15313},{"menu_id":10,"name":"okra","price":15313},{"menu_id":10,"name":"efo riro","price":15313},{"menu_id":10,"name":"ogbono","price":15313},{"menu_id":10,"name":"afang","price":15313},{"menu_id":10,"name":"white soup","price":15313}]

    let query = '';
    menuJSON.forEach(({name, menu_id, price, features}, index) => {
        name = escape(name)
        menu_id = escape(menu_id)
        price = escape(price)
        features = escape(JSON.stringify(features))
        query += "INSERT INTO food SET name = '" + name + "', menu_id = '" + menu_id + "', price = '" + price + "', features = '" + features + "'"

        if(index < menuJSON.length - 1) query += ';'
    })

    console.clear()
    console.log('-----------------------------------------------------------------------------\n\n')
    config.connect.query(
        query,
        (error, resuts) => console.log({error})
    )

    res.status(200).json({
        type: 'success',
        data: query
    })
}
